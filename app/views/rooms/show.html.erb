<div class="row">
  <div class="col-12">
    <h1 class="display-3"><%= @room.name %></h1>
    <div>
      <%= @room.likes.count %> likes * <%= @room.address %>
    </div>
  </div>
</div>
<div class="row mb-4">
  <div class="col-md-6">
    <%= cl_image_tag @room.photos.first.url, class: "img-fluid" %>
  </div>
  <div class="col-md-6">
    <div id="carouselExampleIndicators" class="carousel slide" data-ride="carousel">
      <ol class="carousel-indicators">
        <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>

        <% @room.photos.where.not(id: @room.photos.first.id).each_with_index do |photo, index| %>
          <li data-target="#carouselExampleIndicators" data-slide-to="<%= index %>" class="<%= "active" if index == 0%>"></li>
        <% end %>
      </ol>
      <div class="carousel-inner">
        <% @room.photos.where.not(id: @room.photos.first.id).each_with_index do |photo, index| %>
          <div class="carousel-item <%= "active" if index == 0%>">
            <%= cl_image_tag photo.url, class: "d-block w-100" %>
          </div>
        <% end %>
      </div>
      <button class="carousel-control-prev" type="button" data-target="#carouselExampleIndicators" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
      </button>
      <button class="carousel-control-next" type="button" data-target="#carouselExampleIndicators" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
      </button>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-md-7">
    <h4>Hosted by <%= @room.host.name  %></h4>
    <h5><%= @room.number_of_bedrooms %> of bedrooms * <%= @room.number_of_bathrooms %> of bathrooms</h5>
    <hr>
    <p>
      <%= @room.description %>
    </p>
  </div>
  <div class="col-md-5">
    <div class="card">
      <div class="card-body">
        <h5 class="card-title"><%= @room.cost_per_night.to_s(:currency) %> per night</h5>
        <h6 class="card-subtitle mb-2 text-muted">What a steal!</h6>
        <%= form_with(model: current_user.stays.new, local: true) do |f| %>
          <%= f.hidden_field :room_id, value: @room.id %>

          <div class="form-row">
            <div class="col-md-6 mb-3">
              <%= f.label :check_in %>

              <div class='input-group date mb-3' id='check_inPicker' data-target-input="nearest">
                <%= f.text_field :check_in, :class => "form-control datetimepicker-input", :placeholder => "Check in date", :data => {:target => '#check_inPicker'} %>
                <div class="input-group-append" data-target='#check_inPicker' data-toggle="datetimepicker">
                  <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                </div>
              </div>
            </div>
            <div class="col-md-6 mb-3">
              <%= f.label :check_out %>

              <div class='input-group date mb-3' id='check_outPicker' data-target-input="nearest">
                <%= f.text_field :check_out, :class => "form-control datetimepicker-input", :placeholder => "Check out date", :data => {:target => '#check_outPicker'} %>
                <div class="input-group-append" data-target='#check_outPicker' data-toggle="datetimepicker">
                  <div class="input-group-text"><i class="fa fa-calendar"></i></div>
                </div>
              </div>
            </div>
          </div>


          <%= f.submit "Reserve", class: "btn btn-block btn-outline-secondary" %>
        <% end %>

        <p class="card-text"></p>
      </div>
    </div>
  </div>
</div>

<hr>
<div class="row mb-5 pb-5">
  <div class="col-md-10">
    <div>
      <%= render partial: "rooms/one_photo_map" %>
    </div>
  </div>
  <div class="col-md-2">
    <a href="/" class="btn btn-block btn-primary">Contact Host</a>
  </div>
</div>
<hr>
<div class="row">
  <div class="col-12">
    <h3>Past Guests</h3>
    <div class="list-group list-group-flush">
      <% @room.stays.each do |stay| %>
        <div class="list-group-item list-group-item-action d-flex align-items-center justify-content-between">
          <div>
            <%= stay.guest.name %>
          </div>
          From <%= stay.check_in %>
          to <%= stay.check_out %>
        </div>
      <% end %>
    </div>
  </div>
</div>

<!--
  <div class="row justify-content-center mb-3">
    <div class="col-md-8">
      <%= render object: @room, partial: "card", as: :room %>
    </div>
  </div>

  <div class="row justify-content-center mb-3">
    <div class="col-md-8">
      <%= render partial: "rooms/room_stays" %>
    </div>
  </div>

  <div class="row justify-content-center mb-3">
    <div class="col-md-8">
      <%= render partial: "rooms/room_photos" %>
    </div>
  </div>

  <div class="row justify-content-center mb-3">
    <div class="col-md-8">
      <%= render partial: "rooms/room_likes" %>
    </div>
  </div>

  <div class="row justify-content-center mb-3">
    <div class="col-md-8">
      <%= render partial: "rooms/room_fans" %>
    </div>
  </div>

  <div class="row justify-content-center mb-3">
    <div class="col-md-8">
      <%#= render partial: "rooms/stays" %>
 staydiv>
  </stay.div>
-->
